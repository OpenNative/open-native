<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Troubleshooting</title><meta name="description" content="Documentation for Troubleshooting"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="/assets/normalize.97087844201bf696.css">
<link rel="stylesheet" type="text/css" href="/assets/light.146e7c3d06d34520.css">
<link rel="stylesheet" type="text/css" href="/assets/dark.e5addf511eda33f2.css">
<link rel="stylesheet" type="text/css" href="/assets/style.c1e8b00faa060413.css"><script>var DOCGEN_TIMESTAMP="1689265439";var BASE_PATH="/";window.onload=function(){document.body.classList.remove("preload")};document.addEventListener("DOMContentLoaded",function(){const a=document.querySelector(`.site-nav a[href="${document.location.pathname}"]`);if(a){const b=a.closest("li");if(b)b.classList.add("active");const c=a.closest("details");if(c){c.setAttribute("open",true)}}});function setColor(){const a=localStorage.getItem("docgen-color");if(a==="dark"){document.documentElement.classList.remove("light");document.documentElement.classList.add("dark")}else{document.documentElement.classList.remove("dark");document.documentElement.classList.add("light")}}setColor()</script><link rel="stylesheet" type="text/css" href="/custom.css" />
</head><body class="preload"><label for="menu-toggle-switch" class="menu-toggle-button">☰</label><input type="checkbox" id="menu-toggle-switch" value="0"><div class="page"><div class="header"><div class="logo"><a href="/"><img src="/logo.png" alt="Open Native logo"></a><h2 class="project-title"><a href="/">Open Native</a><span class="project-subtitle">DOCS</span></h2></div><div class="search"><form id="search-form"><input type="text" id="search-box" autocomplete="off" placeholder="Search..."><span class="search-icon">S</span><ul id="search-results"></ul></form></div><div class="header-dummy-right"></div></div><div class="container"><div class="sidebar-left"><nav class="site-nav"><ul class="tree"><li><a href="/installation">Installation</a></li><li><a href="/install-module">Installing native modules</a></li><li><a href="/finding-modules">Searching for native modules</a></li><li><a href="/reference">API Reference</a></li><li><a href="/troubleshooting">Troubleshooting</a></li></ul></nav><span id="light-dark-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" id="dark-mode-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" id="light-mode-icon" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg></span></div><div class="docgen-content"><h1 id="troubleshooting">Troubleshooting</h1>
<p>While most of native modules will just work directly, you might run into some issues with some. Here’s a list of some common problems &amp; their easy fixes.</p>
<h3 id="1-the-number-of-references-in-a-dex-file-cannot-exceed-64k">1. The number of references in a .dex file cannot exceed 64K.</h3>
<p><img src="/multidex-error.png" alt="multidex error" /></p>
<p>The simple fix for this is to enable multidex in your android app.</p>
<ol>
<li>Open <code>App_Resources/Android/app.gradle</code></li>
<li>Add <code>multiDexEnabled true</code> inside `defaultConfig</li>
</ol>
<pre class="code">
<code class="language-groovy">defaultConfig {
    <span class="keyword operator range groovy">..</span>.
    multiDexEnabled <span class="constant language groovy">true</span>
  }
</code></pre>
<p>See <a href="https://github.com/OpenNative/examples/blob/0857f426385702678dec690d858d3e8671b48718/device-info-example/App_Resources/Android/app.gradle#L20">gzip-example app.gradle</a></p>
<h3 id="2-webpack-compilation-errors-after-installing-a-react-native-module">2. Webpack compilation errors after installing a react native module</h3>
<p>This usually happens when a module mixes ESM and CommonJS in a single file. To fix this we need to compile the module with <code>metro-react-native-babel-preset</code>. First install <code>metro-react-native-babel-preset</code>.</p>
<div class="tabgroup"><ul class="tab-list" role="tablist"><li class= role="presentation"><label class="active" id="npm" title="npm" role="tab">npm</label></li><li class= role="presentation"><label class="" id="yarn" title="yarn" role="tab">yarn</label></li></ul><div class="tab-panel active" data-tab-id="npm"><pre class="code">
<code class="language-">npm install -D metro-react-native-babel-preset
</code></pre>
</div><div class="tab-panel " data-tab-id="yarn"><pre class="code">
<code class="language-">yarn add -D metro-react-native-babel-preset
</code></pre>
</div></div>
<p>Now open <code>webpack.config.js</code> file &amp; add the following for your module.</p>
<pre class="code">
<code class="language-js"><span class="meta function declaration js"><span class="support class js">module</span><span class="punctuation accessor js">.</span><span class="meta property object js"><span class="entity name function js">exports</span></span> <span class="keyword operator assignment js">=</span> </span><span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">env</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
  <span class="keyword operator spread js">...</span>
<span class="variable other object js">webpack</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">chainWebpack</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta function declaration js"><span class="punctuation section group begin js">(</span><span class="variable parameter function js">config</span><span class="punctuation section group end js">)</span><span class="meta function declaration js"> </span><span class="storage type function arrow js">=&gt;</span></span> <span class="meta block js"><span class="punctuation section block js">{</span>
    <span class="variable other object js">config</span><span class="punctuation accessor js">.</span><span class="meta property object js">module</span>
      <span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">rule</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>rnmodules<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
      <span class="comment line double-slash js"><span class="punctuation definition comment js">//</span> Replace the `react-native-module` part with the module you installed.
</span>      <span class="punctuation accessor js">.</span><span class="meta property object js">include</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">add</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string regexp js"><span class="punctuation definition string begin js">/</span>node_modules<span class="meta group regexp"><span class="punctuation definition group regexp">(</span><span class="constant other character-class escape backslash regexp">.</span><span class="keyword operator quantifier regexp">*</span><span class="constant other character-class set regexp"><span class="punctuation definition character-class regexp">[</span>/<span class="constant character escape backslash regexp">\\</span><span class="punctuation definition character-class regexp">]</span></span><span class="punctuation definition group regexp">)</span></span><span class="keyword operator quantifier regexp">+</span>react-native-module<span class="punctuation definition string end js">/</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
      <span class="comment line double-slash js"><span class="punctuation definition comment js">//</span> Or for modules such as @react-native-community/module-name use the following regex.
</span>      <span class="punctuation accessor js">.</span><span class="meta property object js">include</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="support function dom js">add</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string regexp js"><span class="punctuation definition string begin js">/</span>node_modules<span class="meta group regexp"><span class="punctuation definition group regexp">(</span><span class="constant other character-class escape backslash regexp">.</span><span class="keyword operator quantifier regexp">*</span><span class="constant other character-class set regexp"><span class="punctuation definition character-class regexp">[</span>/<span class="constant character escape backslash regexp">\\</span><span class="punctuation definition character-class regexp">]</span></span><span class="punctuation definition group regexp">)</span></span><span class="keyword operator quantifier regexp">+</span>@module-org<span class="constant character escape backslash regexp">\/</span>module-name<span class="punctuation definition string end js">/</span></span><span class="punctuation separator comma js">,</span><span class="invalid illegal stray-bracket-end js">)</span>
      <span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">end</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
      <span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">use</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>babel-loader<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
      <span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">before</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>ts-loader<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
      <span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">loader</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>babel-loader<span class="punctuation definition string end js">&#39;</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>
      <span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">options</span><span class="meta group js"><span class="punctuation section group js">(</span><span class="meta object-literal js"><span class="punctuation section block js">{</span>
        <span class="meta object-literal key js">babelrc</span><span class="punctuation separator key-value js">:</span> <span class="constant language boolean false js">false</span><span class="punctuation separator comma js">,</span>
        <span class="meta object-literal key js">presets</span><span class="punctuation separator key-value js">:</span> <span class="meta sequence js"><span class="punctuation section brackets js">[</span><span class="string quoted single js"><span class="punctuation definition string begin js">&#39;</span>module:metro-react-native-babel-preset<span class="punctuation definition string end js">&#39;</span></span><span class="punctuation section brackets js">]</span></span><span class="punctuation separator comma js">,</span>
      <span class="punctuation section block js">}</span></span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span>;
  }</span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
  <span class="keyword operator spread js">...</span>
  <span class="variable other readwrite js">return</span> <span class="variable other object js">webpack</span><span class="punctuation accessor js">.</span><span class="meta function-call method js"><span class="variable function js">resolveConfig</span><span class="meta group js"><span class="punctuation section group js">(</span></span><span class="meta group js"><span class="punctuation section group js">)</span></span></span><span class="punctuation terminator statement js">;</span>
<span class="punctuation section block js">}</span></span>;
</span></span></span></code></pre>
<h3 id="3-native-modules-stopped-working-after-updating-open-native">3. Native Modules stopped working after updating Open Native.</h3>
<p>This usually happens because your <code>hooks</code> folder is outdated. The easiest way to fix this is run <code>ns clean</code> and run your project again so open native hooks are updated.</p>
<h3 id="4-x-native-module-is-not-working">4. X Native Module is not working</h3>
<p>While Open Native can run most native modules, there might be some exceptions that require a few extra steps. Feel free to open an <a href="https://github.com/OpenNative/open-native/issues">issue</a> and we will take a look. You can also join <a href="https://discord.com/invite/RgmpGky9GR">NativeScript Discord Community</a> and send a message in #open-native channel for quicker help.</p>
</div><div class="sidebar-right"><a class="edit-link" href="https://github.com/OpenNative/open-native/tree/main/docs_md/docs_md/troubleshooting.md">Edit this page</a><div class="page-nav" id="page-nav"><p class="page-nav-header">On this page</p><ul><li class="page-nav-level-1"><a href="#troubleshooting">Troubleshooting</a></li><li class="page-nav-level-3"><a href="#1-the-number-of-references-in-a-dex-file-cannot-exceed-64k">1. The number of references in a .dex file cannot exceed 64K.</a></li><li class="page-nav-level-3"><a href="#2-webpack-compilation-errors-after-installing-a-react-native-module">2. Webpack compilation errors after installing a react native module</a></li><li class="page-nav-level-3"><a href="#3-native-modules-stopped-working-after-updating-open-native">3. Native Modules stopped working after updating Open Native.</a></li><li class="page-nav-level-3"><a href="#4-x-native-module-is-not-working">4. X Native Module is not working</a></li></ul></div></div></div></div><footer><div class="groups"></div><div class="copyright">Copyright © 2023 Ammar Ahmed</div></footer><script id="elasticlunr.min.js" async defer type="text/javascript" src="/assets/elasticlunr.min.d5632d4ce358acab.js"></script>
<script id="app.js" async defer type="text/javascript" src="/assets/app.f93b0a1c15e882d9.js"></script></body></html>